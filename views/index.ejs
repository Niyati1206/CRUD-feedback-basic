<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../public/styles.css">
    <title>CRUD app</title>
</head>

<body>
    <h1>User CRUD app</h1>

    <h2>Add new user</h2>
    <form action="/users" method="post" id="saveDetails" onsubmit="return confirm('Pakka na?')"    >
        <label for="name">Name : <input type="text" name="name" required> </label><br>
        <label for="email">Email: <input type="email" name="email" required></label> <br>
        <label for="age">Age: <input type="number" name="age" required></label><br>
        <label for="feedback">Feedback: <textarea name="feedback" rows="4" cols="40" placeholder="Write your feedback here..."></textarea></label> <br>
        <button type="submit">Submit</button>
    </form>

    <hr>
    <h2>All users</h2>
    <table border="1" cellpadding="6" cellspacing="0">
        <thead>
            <tr>
            <th>
                Name
            </th>
            <th>
                Email
            </th>
            <th>
                Age
            </th>
            <th>
                Feedback
            </th>
             <th>
                Actions
            </th>
        </tr>
        </thead>
        <tbody>
            <% if(users.length===0) { %>
                <tr>
                    <td colspan="4">No Users yet</td>
                </tr>
                <% } else { %>
                    <% users.forEach(u=> { %>
                        <tr>
                            <td>
                                <%= u.name %>
                            </td>
                            <td>
                                <%= u.email %>
                            </td>
                            <td>
                                <%= u.age || '' %>
                            </td>
                            <td>
                                <%= u.feedback %>
                            </td>
                   <td>
                        <a href="/users/<%= u._id %>/edit">Edit</a>
                        <form action="/users/<%= u._id %>/delete" method="POST" style="display:inline"
                            onsubmit="return confirm('Delete this user?');">
                            <button type="submit">Delete</button>
                        </form>
                        </td>
                             </tr>
                        <% }) %>
                            <% } %>
        </tbody>
    </table>
</body>
<script>
    document.getElementById("saveDetails").addEventListener("submit", function(){
        alert("Thank you for your feedback");
    })
</script>
</html>